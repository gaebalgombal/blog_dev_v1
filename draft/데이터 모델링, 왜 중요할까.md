# 데이터 모델링, 왜 중요할까?

## 🧐 데이터 모델링, 왜 중요할까?

<aside>
💡 서비스의 데이터 설계는 곧 건물의 구조 설계와 같다. 건물을 지을 때 구조를 가장 먼저 설계하는 것처럼, 먼저 데이터를 체계적으로 설계해야 서비스를 튼튼하게 운영할 수 있다.

</aside>

데이터 모델링은, 오류 없이 데이터를 체계적으로 관리하고 운영하기 위해 필요하다. 즉 데이터 모델링이란, DB를 운영하면서, 데이터가 서로 충돌하거나, 있어야 할 데이터가 없거나, 없어야 할 데이터가 있거나, 하는 오류가 발생하지 않도록 데이터의 설계도를 그리는 과정이다.

## 🧐 데이터 모델링, 어떻게 해야할까?

### 🤔 어떻게?

<aside>
💡 1. 도메인 구조를 파악한다
2. 도메인 구조를 반영해 테이블 구조를 설계한다
3. 이상 현상을 막기 위해 정규화를 통해 테이블을 쪼갠다.
4. 실제 운영의 편의성을 고려해 테이블을 쪼개고 합친다

</aside>

설계는 순차적으로 이루어지는 것이 아니라, 상호작용을 하며 동시다발적으로 이루어진다.

테이블 구조를 설계하는 과정에서 도메인을 더 상세하게 파악하고, 다시 이를 테이블 설계에 반영하기도 하고, 밑그림을 그린 후 정규화와 운영의 편의성을 동시에 고려하고, 그 과정에서 도메인을 다시 고민하기도 한다. 때로는 정규화와 운영의 편의성이 충돌해, 둘 중 하나를 택일해야 할 때도 있다.

### 🤔 이상 현상?

<aside>
💡 삭제 이상: 데이터 행 삭제 시 저장된 다른 정보까지 연쇄적으로 삭제되는 현상
삽입 이상: 데이터 행 삭제 시 특정 속성에 해당하는 값이 없어 NULL 값을 입력해야 하는 현상
수정 이상: 데이터 수정 시 중복으로 저장된 데이터 행들 중, 일부만 수정되어 행들끼리 불일치하는 현상

</aside>

데이터 모델링은, 오류 없이 데이터를 체계적으로 관리할 수 있도록 설계하는 것이 목적이다. DB를 운영하면서 생길 수 있는 대표적인 오류가 바로 이런 이상 현상들이다.

### 🤔 정규화?

<aside>
💡 왜? 데이터를 오류 없이 체계적으로 관리하기 위해서
어떻게? 테이블은 [기본키 → 속성]으로 구성되고, 모든 속성값은 기본키에 완전히 종속되어야 한다.

</aside>

<aside>
💡 제 1 정규화: 릴레이션의 속성값은 반드시 원자값이어야 한다.
제 2 정규화: 모든 속성(기본키가 아닌 속성)이 기본키에 완전 함수 종속되어야 한다.
제 3 정규화: 모든 속성(기본키가 아닌 속성)이 기본키에 이행적으로 종속되어야 한다.
BCNF 정규화: 기본키 → 속성은 유일한 관계여야 한다. 모든 속성은 기본키에 종속되는 관계여야 하지, 속성이 기본키가 되고, 기본키가 속성이 되는 반전이 있어서는 안된다.

</aside>

테이블은 기본키 + 속성으로 구성되어 있으며, 기본키 → 속성의 종속 관계를 가지고 있어야 한다. (기본키에 따라 속성값이 유일하게 정해져야 한다.) 예를 들어, 유저 테이블에서는 기본키(유저의 고유번호)에 따라 속성값(유저의 이름, 별명, 계정, 비밀번호)이 유일하게 정해진다.

- **테이블** 기본키 → 속성
- **유저 테이블** 유저 번호 → 이름, 별명, 계정, 비밀번호

중요한 것은 기본키에 속성이 '**완전히**' 종속되어야 한다는 것이다. 위의 '유저 테이블'의 경우는 관계 파악이 쉽지만, 테이블이 복잡해지면 완전히 종속되는 지 알지 못하고 놓치는 경우가 생긴다. 정규화 원칙에는 여러가지가 있지만, 제 1 정규화를 제외하고는 결국 **기본키에 속성이 '완전히' 종속되어야 한다는 대원칙의 구체적인 방법론**이라 생각하면 더 쉽게 관계 파악이 가능하다.

- 기본키에 속성이 완전히 종속되어야 한다.
  = [기본키]에 따라 속성값이 유일하게 정해져야만 한다.

수강 내역 테이블을 예로 들어보자. 경우에 따라 기본키는 여러 개의 키로 이루어진 복합키일 수도 있다. 속성은 기본키에 '**완전히**' 종속되어야만 하므로, 복합으로 이루어진 기본키에도 역시 '완전히' 종속되어야만 한다. 즉, 복합키 전체를 합쳐야만 속성값이 유일하게 정해져야 한다.(이를 '완전 함수 종속'이라 한다.)

- **테이블** 복합키 → 속성
- **수강 내역 테이블** (유저 번호 + 강의 번호) → 신청 날짜, 성적, 강의 제목, 강의실 ......

신청 날짜, 성적은 유저 번호 + 강의 번호를 합쳐야만 유일하게 결정되므로 기본 키에 '완전히' 종속된다. 반면 강의 제목, 강의실은 강의 번호만으로도 유일하게 결정되므로 기본키에 '완전히' 종속되지 않는다. 따라서, 정규화를 만족하지 못하는 것이다.

## 🙌 결론

이론을 정리해봤으니 다음 단계로 실전에 적용해보자.

[_현실의 문제를 DB 테이블로 구현해보자 >>_](https://www.notion.so/508494d333bb4b1ea9e12f92478ea082?pvs=21)
