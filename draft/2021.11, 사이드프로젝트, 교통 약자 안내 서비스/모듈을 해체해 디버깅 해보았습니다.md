# ëª¨ë“ˆì„ í•´ì²´í•´ ë””ë²„ê¹… í•´ë³´ì•˜ìŠµë‹ˆë‹¤

# ğŸ§Â ì™œ ë²„ê·¸ê°€ ì¤‘ìš”í• ê¹Œ?

## ğŸ¤¦â€â™‚ï¸Â ë²„ê·¸ëŠ” ì–¸ì œë‚˜ ë°œìƒí•œë‹¤

ì£¼ì–´ì§„ ëŒ€ë¡œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì½”ë“œë¥¼ ë”°ë¼ ì¹˜ê¸°ë§Œ í•´ë„ ëˆ„êµ¬ë‚˜ í•  ìˆ˜ ìˆëŠ” ì¼ì´ë‹¤. ê·¸ëŸ¬ë‚˜ ì–¸ì œë‚˜ ë²„ê·¸ê°€ ë°œìƒí•˜ê³ , ë²„ê·¸ë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì€ ë”°ë¼ ì¹˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” í•  ìˆ˜ ì—†ë‹¤.

ê°™ì´ ê°œë°œì„ ì‹œì‘í•œ ë™ë£Œê°€ ë©´ì ‘ì—ì„œ ë©´ì ‘ê´€ì—ê²Œ "í˜„ì—…ì—ì„œ ë¹„ì „ê³µìë“¤ì˜ ë¬¸ì œëŠ” ë¬´ì—‡ì¸ê°€ìš”?" ë¬¼ì–´ë´¤ë”ë‹ˆ, "ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ, ë¬¸ì œê°€ ì–´ë–¤ ì¹´í…Œê³ ë¦¬ì—ì„œ ì–´ë–»ê²Œ ë°œìƒí•˜ëŠ” ì§€ë¥¼ íŒŒì•… ëª»í•˜ëŠ” ê²Œ ê°€ì¥ ë¬¸ì œì¸ ê²ƒ ê°™ë‹¤"ë¼ëŠ” ë‹µë³€ì´ ë“¤ì—ˆë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ ë“¤ì—ˆë‹¤. ê°œë°œì„ í•œë‹¤ëŠ” ê²ƒì€, ì½”ë“œë¥¼ ë”°ë¼ ì¹˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë²„ê·¸ë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì¼ ìˆ˜ë„ ìˆë‹¤.

## ğŸ‘ŠÂ ì§ì ‘ ë””ë²„ê¹…í•´ë³´ì

ë²„ê·¸ë¥¼ ë§ˆì£¼ì¹˜ë©´, ì§ì ‘ ë””ë²„ê¹…í•´ë³´ì. ê°œë°œ ê³µë¶€ë¥¼ í•˜ë©´ì„œ ê°€ì¥ ë…¸ë ¥í•˜ê³  ìˆëŠ” ë¶€ë¶„ì´ë‹¤. ì§ì ‘ ë¬¸ì œë¥¼ ìª¼ê°œê³ , ë¶„ì„í•˜ê³ , í•´ê²°í•´ë³´ì. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥ ë¿ë§Œ ì•„ë‹ˆë¼, í”„ë ˆì„ì›Œí¬ë“ , ë¼ì´ë¸ŒëŸ¬ë¦¬ë“ , ëª¨ë“ˆì´ë“ , ì£¼ì–´ì§„ëŒ€ë¡œ ëŒ€ì¶© ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì‘ë™ ì›ë¦¬ê¹Œì§€ ì´í•´í•˜ëŠ” ì—°ìŠµë„ ë˜ê³  ìˆë‹¤.

# ğŸ™ŒÂ ë””ë²„ê¹… ê³¼ì •ì„ ì •ë¦¬í•´ë³´ì

ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œë„ ì—­ì‹œ ëª¨ë“ˆì„ ì‚¬ìš©í•´ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ ë²„ê·¸ê°€ ë°œìƒí–ˆë‹¤. ë²„ê·¸ë¥¼ ì§ì ‘ í•´ê²°í•œ ê³¼ì •ì„ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤

## ğŸ¤¦â€â™‚ï¸Â ëŒ€ì²´ ì´í•´ê°€ ì•ˆ ë˜ëŠ” ë²„ê·¸ê°€ ë°œìƒí–ˆë‹¤

ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œë„ ì—­ì‹œ ëª¨ë“ˆì„ ì‚¬ìš©í•´ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ ë²„ê·¸ê°€ ë°œìƒí–ˆë‹¤. ëª¨ë“ˆì´ ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ë˜ì ¸ì£¼ê¸´ í–ˆì§€ë§Œ, ë„ì €íˆ ë§¥ë½ë„ ì•ˆ ë§ê³  ì´í•´ë„ ì•ˆ ê°€ëŠ” ë©”ì‹œì§€ê°€ ì „ë¶€ì˜€ë‹¤.

**íšŒì› ê°€ì…ì„ êµ¬í˜„ í•˜ë˜ ì¤‘ì— ë²„ê·¸ê°€ ë°œìƒí–ˆë‹¤**

![bug_found](../../references/draft/2022.11_transportation/debuging/bug_found.png)

![bug_message](../../references/draft/2022.11_transportation/debuging/bug_message.png)
**ì—ëŸ¬ ë©”ì„¸ì§€**

**_"detail" : "No active account found with the given credentials"_**

ë¶„ëª… ë°ì´í„°ë² ì´ìŠ¤ì— ë“±ë¡ëœ í•©ë²•ì  ìœ ì €ì¸ë° active accountê°€ ì—†ë‹¨ë‹¤ğŸ¤·â€â™‚ï¸

í•˜ë‚˜ì”© ë¬¸ì œë¥¼ ìª¼ê°œì„œ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì

## ğŸ‘ŠÂ ë””ë²„ê¹…ì„ í•´ë³´ì

## 1. ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë”°ë¼ê°€ë³´ì

**ì—ëŸ¬ ë©”ì„¸ì§€**

_"detail" : "No active account found with the given credentials"_

â†’ ì—ëŸ¬ ë©”ì„¸ì§€ ë‚´ìš©ëŒ€ë¡œ active accountê°€ ì—†ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ê¹Œ?

**print()ë¥¼ í†µí•´ í™•ì¸**

![debuging_print](../../references/draft/2022.11_transportation/debuging/debuging_print.png)

â†’ accountê°€ ì œëŒ€ë¡œ ì¶œë ¥ëœë‹¤. ì¦‰, active accountëŠ” ì¡´ì¬í•œë‹¤.

**ê²°ë¡ **

â†’ ì—ëŸ¬ ë©”ì„¸ì§€ ë‚´ìš©ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì€ ì•„ë‹ˆë‹¤

â†’ ê·¸ë ‡ë‹¤ë©´, ëª¨ë“ˆ ì–´ë””ì—ì„ ê°€ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬, ì˜ëª»ëœ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë„ìš°ê³  ìˆëŠ” ìƒí™©

**â†’ ì½”ë“œë¥¼ í•˜ë‚˜ì”© ìª¼ê°œê³ , ëœ¯ì–´ ë³´ê³ , print()í•˜ì—¬, ì›ì¸ì„ ì°¾ì•„ë³´ì**

## 2. ì½”ë“œë¥¼ í•œ ë‹¨ê³„ì”© ìª¼ê°œë³´ì

### ğŸ¤”Â **ì–´ë–»ê²Œ?**

<aside>
ğŸ’¡ **print()ë¥¼ í†µí•´ ì§ì ‘ í™•ì¸í•œë‹¤**
1. ì½”ë“œ ì¤„ë§ˆë‹¤ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì°ì–´ print() â†’ ì–´ëŠ ì¤„ê¹Œì§€ ì‹¤í–‰ë˜ë‹¤ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ëŠê²¼ëŠ”ì§€ ì°¾ëŠ”ë‹¤
2. ëŠê¸´ ì§€ì ì—ì„œ ì˜ì‹¬ê°€ëŠ” ë³€ìˆ˜, ê°ì²´ ë“±ì˜ ë‚´ìš©ê³¼ íƒ€ì…ì„ print() â†’ ì—ëŸ¬ë¥¼ ì¼ìœ¼í‚¨ ì›ì¸ ê°ì²´ë¥¼ ì°¾ëŠ”ë‹¤
3. ì›ì¸ì´ ë˜ëŠ” ê°ì²´ì˜ ì†ŒìŠ¤ ì½”ë“œë¡œ ì´ë™í•œì—¬, ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë°˜ë³µí•œë‹¤
4. ê·¼ë³¸ ì›ì¸ì„ ì°¾ì„ ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤

</aside>

<aside>
ğŸ’¡ **í° ë¬¸ì œë¥¼ 'ì‘ì€ ë¬¸ì œë“¤'ë¡œ ìª¼ê°œì–´, í•˜ë‚˜ì”© í•´ê²°í•œë‹¤**
1. ì„œë²„ì˜ ì±…ì„ì´ë¼ëŠ” í° ë¬¸ì œë¥¼, 'ê°ì²´'ë¼ëŠ” ì‘ì€ ë¬¸ì œë“¤ë¡œ ìª¼ê° ë‹¤
2. í•œ ê°ì²´ë¥¼ ëœ¯ì–´ ì›ì¸ì„ ì°¾ê³ , ë‹¤ìŒ ê°ì²´ë¡œ, ë‹¤ì‹œ ë‹¤ìŒ ê°ì²´ë¡œ, ë¬¸ì œë“¤ì„ í•˜ë‚˜ì”© ì°¨ë¡€ëŒ€ë¡œ í•´ê²°í•œë‹¤

</aside>

### ğŸ¤”Â **ì§ì ‘ ëœ¯ì–´ë³´ì**

- (1) sign\*up í•¨ìˆ˜ â†’ TokenObtainSerializer í´ë˜ìŠ¤
  ![debuging_1](../../references/draft/2022.11_transportation/debuging/debuging_1.png)

  **[TokenObatainSerializer í´ë˜ìŠ¤]**
  **self.userê°€ None**
  if not api_settings.USER_AUTHENTICATION_RULE(self.user) â¡ï¸Â if True
  â†’ raise exceptions
  â†’ **"No active account found with the given credentials" ì—ëŸ¬ ë°œìƒ**
  â†’ **ì™œ self.userê°€ Noneì¼ê¹Œ?**

- (2) TokenObtainSerializer í´ë˜ìŠ¤ â†’ authenticate í•¨ìˆ˜
  ![debuging_2](../../references/draft/2022.11_transportation/debuging/debuging_2.png)

  **[authenticate í•¨ìˆ˜]**
  **backend.authenticate(request, **credentials)ê°€ None\*\*
  â†’ user = backend.authenticate(request, \*\*credentials) â¡ï¸Â user = None
  â†’ return user â¡ï¸ return None
  **[TokenObatainSerializer í´ë˜ìŠ¤]**
  â†’ authenticate í•¨ìˆ˜(authenticate(\*\*authenticate_kwargs)) â¡ï¸Â None
  â†’ self.user = authenticate(\*\*authenticate_kwargs) â¡ï¸ self.user = None
  â†’ **self.userê°€ None**
  â†’ **ì™œ backend.authenticate(request, **credentials)ê°€ Noneì¼ê¹Œ?\*\*

- (3) authenticate í•¨ìˆ˜ â†’ ModelBackend í´ë˜ìŠ¤
  ![debuging_3](../../references/draft/2022.11_transportation/debuging/debuging_3.png)

  **[ModelBackend í´ë˜ìŠ¤]**
  [**ModelBackend í´ë˜ìŠ¤ì˜ authenticate í•¨ìˆ˜]\*\*
  **user.check_password(password)ê°€Â False**
  â†’ if user.check_password(password) and self.user_can_authenticate(user) â¡ï¸Â if False
  â†’ ifì— ê±¸ë¦¬ì§€ ì•Šì•„ return ê°’ ì—†ìŒ â¡ï¸ return None
  **[authenticate í•¨ìˆ˜]**
  â†’ backend â¡ï¸Â ModelBackend() ì¸ìŠ¤í„´ìŠ¤
  â†’ backend.authenticate() â¡ï¸Â return None
  â†’ **backend.authenticate(request, **credentials)ê°€ None\*\*
  â†’ **ì™œ user.check_password(password)ê°€Â Falseì¼ê¹Œ?**

- (4) ModelBackend í´ë˜ìŠ¤ â†’ AbstractUserí´ë˜ìŠ¤
  ![debuging_4](../../references/draft/2022.11_transportation/debuging/debuging_4.png)

  **[AbstractBaseUser í´ë˜ìŠ¤]**
  **[AbstractBaseUser í´ë˜ìŠ¤ì˜ check_password í•¨ìˆ˜]**
  **check_password(raw_password, self.password, setter)ê°€ False**
  â†’ return check_password(raw_password, self.password, setter) â¡ï¸Â  return False
  **[ModelBackend í´ë˜ìŠ¤]**
  [**ModelBackend í´ë˜ìŠ¤ì˜ authenticate í•¨ìˆ˜]\*\*
  â†’ user â¡ï¸Â AbstractBaseUser ì¸ìŠ¤í„´ìŠ¤
  â†’ user.check_password() â¡ï¸Â False
  â†’ **user.check_password(password)ê°€Â False**
  â†’ **ì™œ check_password(raw_password, self.password, setter)ê°€ Falseì¼ê¹Œ?**

- (5) AbstractUserí´ë˜ìŠ¤ â†’ check\*password í•¨ìˆ˜
  ![debuging_5](../../references/draft/2022.11_transportation/debuging/debuging_5.png)

  **[check_password í•¨ìˆ˜]**
  **identify_hasher(encoded)ì—ì„œ Value Error ë°œìƒ**
  hasher = identify_hasher(encoded) â¡ï¸Â Value Error ë°œìƒ
  â†’ return False
  **[AbstractUser í´ë˜ìŠ¤]**
  **[AbstractUser í´ë˜ìŠ¤ì˜ check_password í•¨ìˆ˜]**
  â†’ **check_password(raw_password, self.password, setter)ì´ False**
  â†’ **identify_hasher(encoded)ì—ì„œ Value Errorê°€ ë°œìƒí• ê¹Œ?**

- (6) check\*password í•¨ìˆ˜ â†’ identify_hasher í•¨ìˆ˜
  ![debuging_6](../../references/draft/2022.11_transportation/debuging/debuging_6.png)

  **[identify_hasher í•¨ìˆ˜]**
  **get_hasher(algorithm)ì—ì„œ Value Error ë°œìƒ**
  â†’ if / elif / else ëª¨ë‘ ê±°ì¹œ í›„ get_hasher(algorithm)ê°’ì„ return
  â†’ returní•  ë•Œ ValueError ë°œìƒ
  **[check_password í•¨ìˆ˜]**
  â†’ hasher = identify_hasher(encoded)
  â†’ **identify_hasher(encoded)ì—ì„œ Value Error ë°œìƒ**
  **â†’ ì™œ get_hasher(algorithm)ì—ì„œ ValueErrorê°€ ë°œìƒí• ê¹Œ?**

- (7) identify\*hasher í•¨ìˆ˜ â†’ get_hasher í•¨ìˆ˜
  ![debuging_7](../../references/draft/2022.11_transportation/debuging/debuging_7.png)

  **[identify_hasher í•¨ìˆ˜]**
  ë¹„ë°€ë²ˆí˜¸ì—ì„œ algorithmì„ ê²€ìƒ‰í•œ í›„, algorithmì„ get_hasher í•¨ìˆ˜ì— ë§¤ê°œë³€ìˆ˜ë¡œ ë„˜ê¸°ëŠ” í•¨ìˆ˜
  **[get_hasher í•¨ìˆ˜]**
  algorithmì´ ìˆëŠ” ê²½ìš° algorithmì„ ë°˜í™˜í•˜ê³ , ì—†ëŠ” ê²½ìš° ValueErrorë¥¼ ì¼ìœ¼í‚¤ëŠ” í•¨ìˆ˜
  **[get_hasher í•¨ìˆ˜]**
  **ë„˜ì–´ì˜¨ ë§¤ê°œ ë³€ìˆ˜ì— ì•Œê³ ë¦¬ì¦˜ì´ ì—†ìŒ**
  **â†’ get_hasher(algorithm)ì—ì„œ Value Error ë°œìƒ**
  **â†’ ë¹„ë°€ë²ˆí˜¸ì—ì„œ ì•Œê³ ë¦¬ì¦˜ì„ ì°¾ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒ**

- ê²°ë¡ 
  - get_hasher í•¨ìˆ˜ì—ì„œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ í•´ì‹±í•˜ì§€ ì•Šì•„ ì—ëŸ¬ ë°œìƒ
  - get_hasher í•¨ìˆ˜ â†’ identify_hasher í•¨ìˆ˜ â†’ check_password í•¨ìˆ˜ â†’ AbstractUser í´ë˜ìŠ¤ â†’ ModelBackend í´ë˜ìŠ¤ â†’ authenticate í•¨ìˆ˜ â†’ TokenObtainSerializer í´ë˜ìŠ¤ â†’ sign_up í•¨ìˆ˜ â†’ ì—ëŸ¬ ë°œìƒ
  - ëª¨ë“ˆ/í”„ë ˆì„ì›Œí¬ì˜ ì—¬ëŸ¬ ê°ì²´ë¥¼ ê±°ì¹˜ë©´ì„œ ì—ëŸ¬ê°€ ë°œìƒ

![debuging_process_1](../../references/draft/2022.11_transportation/debuging/debuging_process_1.png)

![debuging_process_2](../../references/draft/2022.11_transportation/debuging/debuging_process_2.png)

## ğŸ™ŒÂ  ìµœì¢… ê²°ë¡ 

ëª¨ë“ˆì„ ëœ¯ì–´, í•˜ë‚˜ì”© ì›ì¸ì„ ì°¾ì•„ê°€ë©° ì§ì ‘ ë””ë²„ê¹…ì„ í•´ë³´ì•˜ë‹¤.

ë¬¼ë¡  ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹±í•˜ëŠ” ê²ƒì€ ê¸°ë³¸ ì¤‘ì˜ ê¸°ë³¸ì´ë¯€ë¡œ, ì‹¤ì œ í™˜ê²½ì—ì„œ ì‹œí‚¤ëŠ” ëŒ€ë¡œ ë”°ë¼ ì³¤ë‹¤ë©´ ì´ëŸ° ë²„ê·¸ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ì„ ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ ì‹œí‚¤ëŠ” ëŒ€ë¡œ ë”°ë¼í•˜ëŠ” ëŒ€ì‹ , ì¼ë¶€ëŸ¬ ëª¨ë“ˆì„ í•˜ë‚˜í•˜ë‚˜ í•´ì²´í•˜ê³  ë¶„ì„í–ˆë˜ ê²ƒì€, **ë¬¸ì œë¥¼ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•´ë³´ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.**

<aside>
ğŸ’¡  1. ì‹œí‚¤ëŠ” ëŒ€ë¡œ í•˜ëŠ” ê²ƒì€ ì½”ë”©ì´ ì•„ë‹ˆê³ , ì‹¤ì œ ë¬¸ì œë“¤ì„ í•´ê²°í•´ì¤„ ìˆ˜ë„ ì—†ìœ¼ë©°

    (ğŸ¤¦â€â™‚ï¸ì´í•´ê°€ ë˜ì§€ ì•ŠëŠ” ë²„ê·¸ê°€ ë°œìƒí•˜ê³  ğŸ¤ªì—ëŸ¬ ë©”ì„¸ì§€ë„ ëœ¬ê¸ˆì—†ëŠ” ì´ìƒí•œ ì†Œë¦¬ë¥¼ í•œë‹¤)

2.  ê·¸ëŸ¬ë‹ˆ ë²„ê·¸ì˜ ì›ì¸ì„ â€˜ì§ì ‘' ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤

</aside>

ì´ë²ˆì²˜ëŸ¼ ì‘ì—…ì„ í•˜ëŠ” ì¤‘ì— (ì¼ë‹¨ í‹€ì„ ê°–ì¶”ê³  (ì•„ë¬´ ë¹„ë²ˆì´ë‚˜ ë„£ì–´ì„œ ëª¨ë“ˆì´ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸) â†’ ì™„ì„±í•˜ì(í•´ì‹± ì•Œê³ ë¦¬ì¦˜ì„ ì¶”ê°€) ë²„ê·¸ê°€ ë°œìƒí•˜ê±°ë‚˜, í˜¹ì€ ë” ì¤‘ìš”í•˜ê²Œ â€˜**ì–¸ì–´ë‚˜ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ëŠ¥ë§Œìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ì—†ëŠ” ê²ƒë“¤ì„ ì§ì ‘ êµ¬í˜„í•˜ë ¤**â€™í•œë‹¤ë©´, â€˜**ë²„ê·¸ì˜ ì›ì¸ì„ ì§ì ‘ ì°¾ì„ ìˆ˜**â€™ ìˆì–´ì•¼ í•œë‹¤.

ê·¸ë˜ì„œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì½ì–´, ì½”ë“œë¥¼ ì´í•´í•˜ê³ , ë¬¸ì œì˜ ì›ì¸ì„ ì •í™•í•˜ê²Œ íŒŒì•…í•˜ê³ , ì •í™•í•˜ê²Œ ë””ë²„ê¹…í•´ë³´ê³  ì‹¶ì—ˆë‹¤. ê·¸ë¦¬ê³  ì‹¤ì œë¡œ ì†ŒìŠ¤ì½”ë“œë¥¼ ì½ê³  ì´í•´í•˜ê³ , ë””ë²„ê¹…í•  ìˆ˜ ìˆì—ˆë‹¤.
